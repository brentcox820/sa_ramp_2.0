## Activies and Agenda

- **Upgrade Elastic Deployment in Cloud to the following configuration**
   - Hot Tier: 8GB
   - Machine Learning: 2GB
   - Kibana: 4GB
   - Enterprise Search: 2GB
   - Intergrations Server: 2GB

### **Start Collection Data via AGENT**

- Create a new Agent Policy
   - Add an integration for Elastic Defend to the newley created policy
   - Save Policy and choose to add agents later
- Add Agent via Fleet main page
   - Choose the new policy you created
   - Navigate to the mac tab and copy the last line of code
```other
sudo ./elastic-agent install --url=https://f2f020c66d8a4fd4aa043885f69316e3.fleet.us-west-2.aws.found.io:443 --enrollment-token=NWJwZmtJa0JqdmZ0RmtjT0lSQno6cEQtUlVpWXNURWlWS0tPT0RKUVZvQQ==
```

   - Once copied you will replace the “install” command with “enroll”
      - This will allow you to repurose the installed elastic agent and start collecting metrics on your Elastic Deployment so we can start creating some oy11 “observability data”
      - Look will be below

```other
sudo elastic-agent enroll --url=https://f2f020c66d8a4fd4aa043885f69316e3.fleet.us-west-2.aws.found.io:443 --enrollment-token=NWJwZmtJa0JqdmZ0RmtjT0lSQno6cEQtUlVpWXNURWlWS0tPT0RKUVZvQQ==
```

- Next open a new terminal window on your mac with Cmd + spacebare and type Terminal
   - Once in terminal you will navigate to the /Libary/Elastic folder for us to run the above command.

```other
cd /Library/Elastic
```

- Now that we are in the Elastic Folder we can run the above command and enroll the agent and point the logs and metrics to our elastic cloud deployment.
- If you still have the Fleet page open you should see the agent enrollment complete and then data start flowing.

### **Elastic Agent via POC / POV**

- As an SA we will be participating in POC and POV in which we will assit our customers in deploying and setting up the elastic agent for not only basic data collection from the systems but also for cloud enviroments (AWS, AZURE, GCP)
- The main thing to remember is that as an SA we need to plan the data that will be flowing through the agent via integrations (API or Filebeat) and we need to set the customer up for sucess in how many agents they will need to install on servers ( hosts) to support the number of events and logs they plan to ingest.
   - IE - Customer is doing a security POC with o365 logs, Cisco ASA then we need to understand how many events are coming thru a second as the ASA could be noisy and drop events if we only have one agent running the ingest
      - We will get into this more with intergrations but agent install is a key knowledge in planning

**Elastic Agent via REAL WORLD**

- Once you get through POC the agent will be deployed via an MDM service or management tool that will install the downloaded package from the elastic website and then upload and install to all the hosts.
- Once installed the customer will run a script to run the enroll with token to the specific policy that they want the hosts to be tied to.
   - Same Method you did wth the script via terminal but in a large scale

***We can discuss this more if the team has questions***

### **HOMEWORK:**

1. Make sure you Elastic Agent is connected and sending metrics and logs to your elastic deployment.
   - Ensure that Elastic Defend is on the intergrations list fo the new Policy that you agent is conencted to and linked to your deployment.
1. If you are having issues with this then do a uninstall and reinstall of the agent and re enroll the agent and that will solve the 404 Fleet auth issue with the old token.

